### 摘要

  

随着高校规模的扩大和师生出行需求的增长，校车调度问题对校园交通系统的高效运行和师生出行体验的影响愈发显著。合理的校车调度方案不仅能够提升车辆资源利用率，缩短师生候车与乘车时间，还能为智慧校园管理提供科学决策依据。本文以西南大学校车路线为背景，针对早高峰和下课高峰时段的校车运输需求，建立了校园交通网络模型。模型以站点为节点、线路为边，综合考虑了车辆类型、容量、行驶速度、上下车时间以及高峰车换线等待时间等因素。
在第一问中，基于实际需求数据，采用离散事件仿真方法，模拟校车在固定线路下的循环运输过程，计算了所有学生被运送到目标站点所需的最短时间，并分析了各类车辆的调度安排。第二问进一步分析了下课高峰时段的需求变化，优化了车辆分配方案。第三问允许高峰车型在不同线路间自由调配，通过遗传算法等智能优化方法，获得了全局最优的车辆调度方案，使早高峰和下课高峰的总运输时间最短。最后，本文采用蒙特卡罗模拟方法对模型的参数敏感性进行了分析，考虑了天气因素对候车人数和运行速率的影响，给出了校车最优的调配方案，并与第三问的结果做比较分析，说明了各影响因子对决策的影响。  
本研究不仅为高校校车调度提供了量化分析工具，也为类似的城市公交、企业通勤等交通系统优化提供了理论参考和实践指导。

## 1、问题背景介绍与模型设计

本题要求在给定校车数量、容量、线路和不同高峰时段各站点需求的情况下，设计调度方案，使所有学生在最短时间内被运送到目标站点。需考虑以下条件：

- 西南大学开通了 8 条编号观光车、1 条支线以及部分高峰旅游观光车，各车型数量和单车最大人数已知。

- 高峰车可在任意线路行驶，但转换线路时有 30s 的等待时间，且必须完整经过该车型的所有站点才可重新选择所需线路，重新选择线路后，高峰车到达最近的该线路的站点后沿该线路运行。

- 早高峰和下课高峰各站点的候车人数及拟到站点已知，每个站点人数比例视为相同。

- 默认校车行驶速度为 15km/h，每上车/下车一个人需要 3s。

### 1.1 建模假设

- 所有学生在早高峰 7:30 和下课高峰 9:45 前已到达乘车点，且后续不会再增加。

- 每位学生的上车和下车时间均为 3s，且可并行进行（即同一时刻可有多人上下车）。

- 校车在各站点间行驶速度恒定，不受交通拥堵等因素影响。

- 校车到达乘车点时，所有需上车的学生均可依次上车，只要车辆未超载。

- 校车在每条线路上循环运行，直到所有需求被满足。

- 不考虑车辆故障等突发情况。

### 1.2 符号说明

| 符号 | 含义 |

| --- | --- |

| $\mathcal{R}$ | 校车线路集合，$\mathcal{R}=\{1,2,\cdots,8,\text{支线}\}$ |

| $\mathcal{K}$ | 校车车型集合，$\mathcal{K}=\{1,2,\cdots,8,\text{支线},\text{高峰车}1,\text{高峰车}2\}$ |

| $n_k$ | 车型 $k\in\mathcal{K}$ 的校车数量 |

| $C_k$ | 车型 $k\in\mathcal{K}$ 的单车最大载客量 |

| $\mathcal{S}_r$ | 线路 $r\in\mathcal{R}$ 经过的站点序列，$\mathcal{S}_r=\{s_{r1},s_{r2},\cdots\}$ |

| $D_i^m$ | 高峰时段 $m$（$m = 1$ 表示早高峰，$m = 2$ 表示下课高峰）站点 $i$ 的候车人数 |

| $\mathcal{T}_i^m$ | 高峰时段 $m$ 站点 $i$ 的拟到站点集合 |

| $D_{i\rightarrow j}^m$ | 高峰时段 $m$ 从站点 $i$ 到站点 $j$ 的人数，$D_{i\rightarrow j}^m=\frac{D_i^m}{\vert\mathcal{T}_i^m\vert}$ |

| $dist(s_{ri},s_{rj})$ | 线路 $r$ 上站点 $s_{ri}$ 与 $s_{rj}$ 之间的距离（单位：km） |

| $V$ | 校车行驶速度（默认 $V = 15$ km/h） |

| $t_0$ | 单人上/下车时间（$t_0 = 3$ s） |

| $t_w$ | 高峰车换线等待时间（$t_w = 30$ s） |

| $T_{run}$ | 校车行驶时间 |

| $T_{on}$ | 上车总时间 |

| $T_{off}$ | 下车总时间 |

| $T_{seg}$ | 校车每一段行程的总用时 |

| $T_{total}$ | 总运输时间 |

| $x_{kr}^m$ | 决策变量，高峰时段 $m$ 车型 $k$ 分配到线路 $r$ 的车辆数 |

  

### 1.3 模型建立与算法实现

  

#### 1.3.1 运输时间计算

- **行驶时间**：

校车在站点 $s_{ri}$ 与 $s_{r(i + 1)}$ 之间的行驶时间为

$$T_{run}=\frac{dist(s_{ri},s_{r(i + 1)})}{V}\times60\quad(\text{单位：分钟})$$

- **上/下车时间**：

设站点 $s_{ri}$ 处上车人数为 $n_{on}$，下车人数为 $n_{off}$，则上车总时间和下车总时间分别为

$$T_{on}=n_{on}\times\frac{t_0}{60}$$ $$T_{off}=n_{off}\times\frac{t_0}{60}$$

- **每辆车每一段总用时**：

若该段行程无换线情况，$$T_{seg}=T_{run}+T_{on}+T_{off}$$ 若为高峰车且有换线情况，$$T_{seg}=T_{run}+T_{on}+T_{off}+t_w$$

- **总运输时间**：

总运输时间 $$T_{total}=\max_{k,r}\left\{\sum_{u}T_{seg}^{(k,r,u)}\right\}$$ 其中 $T_{seg}^{(k,r,u)}$ 表示车型 $k$ 分配到线路 $r$ 的第 $u$ 段行程的总用时。

  

#### 1.3.2 校车调度规则

- 普通观光车和支线车只能跑固定编号线路。

- 高峰车可在任意线路行驶，但需遵循换线规则。

- 每辆车循环运行，直到所有需求被满足。

  

#### 1.3.3 仿真流程

1. 初始化所有站点需求、车辆分配、车辆状态。

2. 每轮循环，所有车辆依次按线路行驶，依次处理每一站的上下车。

3. 累计每辆车每一段的行驶和上下车时间。

4. 当所有需求为 0 时，记录总用时，输出调度方案。

  

#### 1.3.4 算法实现

本题采用**离散事件仿真**，主要流程如下：

1. **数据初始化**：

- 读取站点、线路、车辆、需求数据。

- 构建校车网络图。

2. **车辆调度与仿真**：

- 对每辆车，循环遍历其线路上的所有站点。

- 在每一站，处理下车（目的地为该站的乘客）、上车（有需求且未超载）。

- 计算本段行驶时间、上下车时间，累计到总用时。

- 若为高峰车且需换线，增加换线等待时间。

- 重复循环，直到所有需求为 0。

3. **输出结果**：

- 输出最优运输时间和每辆车的调度安排。

  

#### 1.3.5 数据统计与可视化图形

1. **数据统计**：

- 通过校园地图统计每一个条路线所经过的站点以及站点之间的距离。并将站点之间的关系简历可视化图形如图所示：

![](Figure_2.png)

  

## 2、问题重述

### 2.1 问题 1

在早高峰期（7:30），已知各站点的候车人数 $D_i^1$ 以及拟到站点 $\mathcal{T}_i^1$，且每个站点人数比例视为相同。同时已知各编号校车的数量 $n_k$、单车最大人数 $C_k$、行驶路线 $\mathcal{S}_r$，高峰车可在任意线路行驶（转换线路时有 30s 等待时间，需完整经过该车型所有站点才可重新选线），校车行驶速度为 15km/h，每上车/下车一个人需要 3s。要求给出一个最优方案，使得校车在最短时间内将所有人运输到相应站点。

  

### 2.2 问题 2

在下课时期（9:45），已知各站点的候车人数 $D_i^2$ 以及拟到站点 $\mathcal{T}_i^2$，每个站点人数比例视为相同。要求给出一个最优方案，使得校车在最短时间内将所有人运输到相应站点。

  

### 2.3 问题 3

车辆数目 $n_k$ 和每辆车的荷载人数 $C_k$ 不变，可自由调配每辆车所属的路线。要求给出一个最优方案，在早晨七点时调配校车，使得校车在问题 1 和问题 2 的条件下可以在最短时间内将所有人运输到相应站点，并给出最短时间。

  

### 2.4 问题 4

受天气影响，在阴雨等天气下，候车人数可能会有 $\pm15\%$ 的变化，校车的运行速率可能会发生 $\pm5\%$ 的变化。要求综合考虑运行速率，候车人数等影响，给出校车最优的调配方案，并与第三问的结果做比较分析，说明各影响因子对决策的影响。

  

## 3、算法选择

### 3.1 方法

#### 3.1.1 校车调度优化

- **相关知识整理**：校车调度优化是一个复杂的组合优化问题，涉及到车辆分配、路线规划、时间安排等多个方面。其目标是在满足一定约束条件下，使校车的运输效率最高，通常以运输时间最短、运输成本最低等为衡量指标。在校园环境中，需要考虑站点需求、车辆容量、行驶速度、上下车时间等因素。

- **研究现状**：目前，对于校车调度优化问题的研究主要集中在启发式算法和智能优化算法的应用上。例如，遗传算法、模拟退火算法、蚁群算法等。这些算法可以在较短的时间内找到近似最优解。

- **创新型算法**：近年来，一些混合算法逐渐被应用于校车调度优化问题，如遗传算法与模拟退火算法的结合，能够充分发挥两种算法的优势，提高求解的精度和效率。

  

#### 3.1.2 离散事件仿真

- **相关知识整理**：离散事件仿真是一种通过模拟系统中离散事件的发生和演变来研究系统行为的方法。在校车调度问题中，可以将校车的行驶、上下车、换线等事件看作离散事件，通过模拟这些事件的发生顺序和时间，来计算校车的运输时间和调度方案。

- **研究现状**：离散事件仿真在交通系统、物流系统等领域得到了广泛的应用。在校车调度问题中，离散事件仿真可以帮助我们更准确地模拟校车的实际运行情况，考虑到各种因素的影响。

- **创新型算法**：一些基于并行计算的离散事件仿真算法逐渐被提出，能够提高仿真的效率，特别是在处理大规模系统时具有明显的优势。

  

#### 3.1.3 蒙特卡罗模拟

- **相关知识整理**：蒙特卡罗模拟是一种通过随机抽样来估计系统性能的方法。在存在不确定性因素的问题中，如本题中天气对候车人数和运行速率的影响，蒙特卡罗模拟可以通过多次随机抽样，模拟不同的场景，评估系统在各种情况下的性能。

- **研究现状**：蒙特卡罗模拟在金融、工程、物理等领域有广泛应用。在交通调度问题中，可用于分析不确定性因素对调度方案的影响。

- **创新型算法**：一些改进的蒙特卡罗模拟方法，如重要性抽样、分层抽样等，可以提高模拟的效率和准确性。

  

## 4、问题分析

### 4.1 问题 1

- **核心问题**：在早高峰固定车辆分配和线路的情况下，找到一种调度方案，使所有学生在最短时间内到达目标站点。

- **核心要点**：

- 理论依据：基于离散事件仿真和优化理论，通过模拟校车的运行过程，计算不同调度方案下的运输时间，找到最优方案。

- 实际应用场景：在校园早高峰时段，学生集中出行，需要合理安排校车的运行，以减少学生的等待时间。

  

### 4.2 问题 2

- **核心问题**：在下课高峰时段，根据新的站点需求，优化车辆分配方案，使学生在最短时间内到达目标站点。

- **核心要点**：

- 理论依据：同样基于离散事件仿真和优化理论，结合下课高峰时段的需求特点，对车辆分配进行调整。

- 实际应用场景：下课高峰时段，学生从教学楼等场所分散到各个宿舍区等，需求分布与早高峰不同，需要重新规划校车调度。

  

### 4.3 问题 3

- **核心问题**：自由调配车辆路线，在早高峰和下课高峰条件下，使学生在最短时间内到达目标站点，并确定最短时间。

- **核心要点**：

- 理论依据：运用智能优化算法，如遗传算法，对车辆路线分配进行全局搜索，找到最优解。

- 实际应用场景：通过合理调配车辆路线，可以提高校车的利用率，更好地满足不同时段的需求。

  

### 4.4 问题 4

- **核心问题**：考虑天气因素对候车人数和运行速率的影响，给出最优调配方案，并与问题 3 的结果进行比较，分析影响因子的作用。

- **核心要点**：

- 理论依据：通过不确定性分析方法，如蒙特卡罗模拟，模拟不同天气情况下的候车人数和运行速率变化，评估对调度方案的影响。

- 实际应用场景：在实际运营中，天气等因素会对校车的运行产生影响，需要制定相应的应对策略。

  

## 5、问题分析

### 5.1 问题 1

- **数据含义与作用**：题目中给出的站点候车人数 $D_i^1$、拟到站点 $\mathcal{T}_i^1$、校车数量 $n_k$、容量 $C_k$、行驶路线 $\mathcal{S}_r$ 等数据是计算运输时间和制定调度方案的基础。

- **问题逻辑**：根据早高峰各站点的需求，结合校车的运行规则，模拟校车的运输过程，计算不同调度方案下的运输时间，找到最短运输时间的方案。

- **问题思路**：可以采用离散事件仿真的方法，对每一辆校车的运行进行模拟，记录每一次上下车和行驶的时间，直到所有学生都被运输到目标站点。

- **当前研究现状与算法选择**：目前，离散事件仿真和启发式算法是解决此类问题的常用方法。这里可以选择离散事件仿真结合贪心算法的思路，优先安排距离站点近且容量合适的校车。

  

### 5.2 问题 2

- **数据含义与作用**：下课高峰时段的站点候车人数 $D_i^2$ 和拟到站点 $\mathcal{T}_i^2$ 数据用于重新评估需求，调整车辆分配方案。

- **问题逻辑**：与问题 1 类似，但需求分布发生了变化，需要根据新的需求重新规划校车的调度。

- **问题思路**：同样采用离散事件仿真的方法，结合下课高峰的需求特点，对车辆分配进行优化。

- **当前研究现状与算法选择**：可以使用遗传算法对车辆分配进行优化，通过不断迭代找到最优方案。

  

### 5.3 问题 3

- **数据含义与作用**：车辆数目 $n_k$、荷载人数 $C_k$ 和各时段的需求数据 $D_i^m$ 是自由调配车辆路线的依据。

- **问题逻辑**：在可以自由调配车辆路线的情况下，通过优化算法找到一种分配方案，使早高峰和下课高峰的运输时间最短。

- **问题思路**：采用遗传算法，将车辆路线分配作为染色体，通过选择、交叉、变异等操作，不断进化种群，找到最优解。

- **当前研究现状与算法选择**：遗传算法在解决组合优化问题方面具有较好的效果，能够在全局范围内搜索最优解。

  

### 5.4 问题 4

- **数据含义与作用**：天气因素对候车人数和运行速率的影响范围数据用于模拟不同的天气场景，评估调度方案的鲁棒性。

- **问题逻辑**：考虑天气因素的不确定性，通过多次模拟不同的天气情况，找到一种在各种情况下都能较好运行的调度方案，并与问题 3 的结果进行比较。

- **问题思路**：采用蒙特卡罗模拟方法，随机生成不同的候车人数和运行速率，对每种情况进行离散事件仿真，统计运输时间，分析影响因子的作用。

- **当前研究现状与算法选择**：蒙特卡罗模拟是处理不确定性问题的常用方法，能够有效地评估系统在不同情况下的性能。

  

## 6、算法实现与应用$

### 6.1 离散事件仿真

- **算法解释**：离散事件仿真通过模拟系统中离散事件的发生和演变来研究系统行为。在校车调度问题中，将校车的行驶、上下车、换线等事件看作离散事件，按照时间顺序依次处理这些事件。

- **核心公式**：

- 行驶时间：$$T_{run}=\frac{dist(s_{ri},s_{r(i + 1)})}{V}\times60（单位：分钟）$$其中 $dist(s_{ri},s_{r(i + 1)})$ 是线路 $r$ 上站点 $s_{ri}$ 与 $s_{r(i + 1)}$ 之间的距离，$V$ 是校车行驶速度。

- 上/下车时间：$$T_{on}=n_{on}\times\frac{t_0}{60}$$$$T_{off}=n_{off}\times\frac{t_0}{60}$$ 其中 $n_{on}$、$n_{off}$ 分别为本站上车、下车人数，$t_0$ 是单人上/下车时间。

- 每辆车每一段总用时：若该段行程无换线情况$$T_{seg}=T_{run}+T_{on}+T_{off}$$若为高峰车且有换线情况 $$T_{seg}=T_{run}+T_{on}+T_{off}+t_w$$

- **实际案例**：假设校车从站点 $s_{r1}$ 到站点 $s_{r2}$ 的距离为 3km，行驶速度为 15km/h，则行驶时间 $T_{run}=\frac{3}{15}\times60 = 12$ 分钟。如果在站点 $s_{r1}$ 有 10 人上车，单人上/下车时间为 3s，则上车时间 $T_{on}=10\times\frac{3}{60}=0.5$ 分钟。

  

### 6.2 遗传算法$^{[1]}$

- **算法解释**：遗传算法是一种基于自然选择和遗传机制的优化算法。它通过模拟生物进化过程，将问题的解表示为染色体，通过选择、交叉、变异等操作，不断进化种群，找到最优解。

- **核心公式**：

- 适应度函数：$$f(x)=\frac{1}{T_{total}}$$ 用于评估每个染色体的优劣，其中 $T_{total}$ 是总运输时间。

- 选择操作：采用轮盘赌选择法，每个染色体被选中的概率 $$P_i=\frac{f(x_i)}{\sum_{j = 1}^{N}f(x_j)}$$ 其中 $N$ 是种群大小。

- 交叉操作：随机选择两个染色体，在某个位置进行交叉，生成新的染色体。

- 变异操作：以一定的概率对染色体的某个基因进行变异。

- **实际案例**：假设有一个校车调度问题，染色体表示为车辆的路线分配。初始种群中有 100 个染色体，通过选择、交叉、变异操作，不断进化种群，最终找到最优的路线分配方案。

  

### 6.3 蒙特卡罗模拟$^{[2]}$

- **算法解释**：蒙特卡罗模拟是一种通过随机抽样来估计系统性能的方法。在本题中，通过随机生成不同的候车人数和运行速率，对每种情况进行离散事件仿真，统计运输时间，分析影响因子的作用。

- **核心公式**：无特定核心公式，主要是通过多次随机抽样和仿真计算来统计结果。

- **实际案例**：假设候车人数的变化范围为 $\pm15\%$，运行速率的变化范围为 $\pm5\%$。通过蒙特卡罗模拟，随机生成 100 组候车人数和运行速率，对每组数据进行离散事件仿真，得到 100 个运输时间，分析这些运输时间的分布情况。

  

## 7、模型建立历程

### 7.1 问题 1

#### 7.1.1 建模思路

基于离散事件仿真，模拟校车在早高峰的运行过程，计算运输时间，找到最优调度方案。

  

#### 7.1.2 建模过程

- 定义站点、车辆、需求等数据结构。

- 初始化所有站点的需求 $D_i^1$ 和车辆的状态。

- 按照时间顺序依次处理校车的行驶、上下车等事件。
#### 7.1.3 求解过程

- 读取站点、线路、车辆、需求数据。

- 构建校车网络图。

- 对每辆车，循环遍历其线路上的所有站点。

- 在每一站，处理下车（目的地为该站的乘客）、上车（有需求且未超载）。

- 计算本段行驶时间、上下车时间，累计到总用时。

- 若为高峰车且需换线，增加换线等待时间。

- 重复循环，直到所有需求为 0。

- 输出最优运输时间和每辆车的调度安排。

  

### 7.2 问题 2

#### 7.2.1 建模思路

与问题 1 类似，但根据下课高峰的需求特点，对车辆分配进行优化。

  

#### 7.2.2 建模过程

- 读取下课高峰的需求数据 $D_i^2$。

- 调整车辆分配方案。

- 同样采用离散事件仿真模拟校车运行。

  

#### 7.2.3 求解过程

- 读取站点、线路、车辆、下课高峰需求数据。

- 构建校车网络图。

- 采用遗传算法对车辆分配进行优化。

- 对优化后的车辆分配方案进行离散事件仿真。

- 输出最优运输时间和每辆车的调度安排。

  

### 7.3 问题 3

#### 7.3.1 建模思路

运用遗传算法，对车辆路线分配进行全局搜索，找到在早高峰和下课高峰条件下的最优方案。

  

#### 7.3.2 建模过程

- 定义染色体表示车辆路线分配，即 $x_{kr}^m$。

- 设计适应度函数，以运输时间的倒数作为适应度。

- 进行选择、交叉、变异等操作，进化种群。

  

#### 7.3.3 求解过程

- 初始化种群，随机生成车辆路线分配方案。

- 计算每个染色体的适应度。

- 进行选择操作，选择优良的染色体。

- 进行交叉和变异操作，生成新的染色体。

- 重复上述步骤，直到满足终止条件。

- 输出最优方案和最短运输时间。

  

### 7.4 问题 4

#### 7.4.1 建模思路

采用蒙特卡罗模拟方法，考虑天气因素对候车人数和运行速率的影响，评估调度方案的鲁棒性。

  

#### 7.4.2 建模过程

- 定义候车人数和运行速率的变化范围。

- 随机生成不同的候车人数和运行速率组合。

- 对每组组合进行离散事件仿真。

  

#### 7.4.3 求解过程

- 确定候车人数和运行速率的变化范围。

- 进行蒙特卡罗模拟，随机生成 100 组候车人数和运行速率。

- 对每组数据进行离散事件仿真，记录运输时间。

- 分析运输时间的分布情况，与问题 3 的结果进行比较。

- 输出最优调配方案和影响因子分析结果。

  

## 8、模型建立

### 8.1 问题 1

#### 8.1.1 数学模型

- 目标函数：$$\min T_{total}=\max_{k,r}\left\{\sum_{u}T_{seg}^{(k,r,u)}\right\}$$即总运输时间最短。

- 约束条件：

- 每辆车的乘客数不超过其容量：$$\sum_{i\in\mathcal{S}_r}n_{on}^{(k,r,i)}\leq C_k$$ 其中 $n_{on}^{(k,r,i)}$ 是车型 $k$ 分配到线路 $r$ 的车辆在站点 $i$ 的上车人数。

- 每个站点的需求必须被满足：$$\sum_{k,r}n_{on}^{(k,r,i)} = D_i^1$$ 其中 $n_{on}^{(k,r,i)}$ 是车型 $k$ 分配到线路 $r$ 的车辆在站点 $i$ 的上车人数。

- 车辆按固定线路行驶：对于普通观光车和支线车，$x_{kr}^1$ 为固定值；对于高峰车，遵循换线规则。

  

#### 8.1.2 模型原理与适用范围

- 原理：基于离散事件仿真，模拟校车的实际运行过程，通过不断更新车辆和站点的状态，计算运输时间。

- 适用范围：适用于固定车辆分配和线路的校车调度问题，在校园早高峰等场景下具有较好的应用效果。

- 局限性：没有考虑车辆的动态调度和交通拥堵等因素。

- 改进方向：可以引入实时交通信息，对车辆进行动态调度。

  

#### 8.1.3 实际案例说明

假设校园内有 3 个站点 $s_{r1}$、$s_{r2}$、$s_{r3}$，2 辆校车。站点 $s_{r1}$ 有 20 人要去站点 $s_{r2}$，站点 $s_{r2}$ 有 10 人要去站点 $s_{r3}$。校车 1 容量为 15 人，线路为 $s_{r1}-s_{r2}$；校车 2 容量为 10 人，线路为 $s_{r2}-s_{r3}$。通过离散事件仿真，可以计算出最优的运输时间和调度方案。

  

### 8.2 问题 2

#### 8.2.1 数学模型

- 目标函数：$$\min T_{total}=\max_{k,r}\left\{\sum_{u}T_{seg}^{(k,r,u)}\right\}$$总运输时间最短。

- 约束条件：与问题 1 类似，但需求数据为下课高峰的需求 $D_i^2$。

  

#### 8.2.2 模型原理与适用范围

- 原理：同样基于离散事件仿真，结合遗传算法对车辆分配进行优化。

- 适用范围：适用于下课高峰等需求分布变化较大的场景。

- 局限性：遗传算法的参数选择可能会影响求解结果。

- 改进方向：可以采用自适应遗传算法，自动调整参数。

  

#### 8.2.3 实际案例说明

假设下课高峰时，站点 $s_{r1}$ 有 15 人要去站点 $s_{r3}$，站点 $s_{r2}$ 有 20 人要去站点 $s_{r1}$。通过遗传算法优化车辆分配，再进行离散事件仿真，找到最优方案。

  

### 8.3 问题 3

#### 8.3.1 数学模型

- 目标函数：$$\min (T_{total}^1 + T_{total}^2)$$，即早高峰和下课高峰的总运输时间最短，其中 $$T_{total}^m=\max_{k,r}\left\{\sum_{u}T_{seg}^{(k,r,u,m)}\right\}$$$$m = 1,2$$

- 约束条件：

- 每辆车的乘客数不超过其容量：$$\sum_{i\in\mathcal{S}_r}n_{on}^{(k,r,i,m)}\leq C_k$$$$m = 1,2$$

- 每个站点的需求必须被满足：$$\sum_{k,r}n_{on}^{(k,r,i,m)} = D_i^m$$$$m = 1,2$$

- 车辆可自由调配路线：$$\sum_{r\in\mathcal{R}}x_{kr}^m=n_k$$$$m = 1,2$$$$k\in\mathcal{K}$$

  

#### 8.3.2 模型原理与适用范围

- 原理：运用遗传算法对车辆路线分配进行全局搜索，找到最优解。

- 适用范围：适用于可以自由调配车辆路线的校车调度问题。

- 局限性：遗传算法的收敛速度可能较慢。

- 改进方向：可以结合局部搜索算法，提高收敛速度。

  

#### 8.3.3 实际案例说明

假设校园内有 5 条线路，10 辆校车。通过遗传算法对车辆路线进行分配，使早高峰和下课高峰的总运输时间最短。

  

### 8.4 问题 4

#### 8.4.1 数学模型

- 目标函数：$\min E(T_{total})$，在考虑天气因素不确定性的情况下，使平均运输时间最短。

- 约束条件：与问题 3 类似，但候车人数 $D_i^m$ 和运行速率 $V$ 为随机变量

$$D_i^m\sim U[0.85D_i^m,1.15D_i^m]$$ $$V\sim U[0.95V,1.05V]$$

  

#### 8.4.2 模型原理与适用范围

- 原理：采用蒙特卡罗模拟方法，通过多次随机抽样和仿真计算，评估调度方案的鲁棒性。

- 适用范围：适用于存在不确定性因素的校车调度问题。

- 局限性：蒙特卡罗模拟的结果可能存在一定的误差。

- 改进方向：可以增加抽样次数，提高结果的准确性。

  

#### 8.4.3 实际案例说明

假设在阴雨天气下，候车人数可能增加 10%，运行速率可能降低 5%。通过蒙特卡罗模拟，找到在这种情况下的最优调度方案。

  

## 9、结果分析

  

### 9.1 问题 1 结果

在早高峰时段，基于所建立的离散事件仿真模型，我们得到了使所有学生在最短时间内到达目标站点的车辆调度方案。具体的车辆调度安排如下：

  

| 车辆编号 | 行驶路线 | 车辆类型 |

|----------|----------|----------|

| 42 | 9 | 高峰车 1 |

| 43 | 8 | 高峰车 1 |

| 44 | 4 | 高峰车 1 |

| 45 | 9 | 高峰车 1 |

| 46 | 8 | 高峰车 2 |

| 47 | 4 | 高峰车 2 |

| 48 | 9 | 高峰车 2 |

| 49 | 8 | 高峰车 2 |

| 50 | 4 | 高峰车 2 |

| 51 | 9 | 高峰车 2 |

  

通过对该调度方案的仿真计算，得出早高峰时段将所有学生运输到相应站点所需的最短时间为 **20.68** 分钟。从这个结果可以看出，在早高峰各站点需求分布下，将高峰车合理分配到 4、8、9 号路线能够较为高效地完成运输任务。这可能是因为这些路线经过的站点需求较大，且车辆的容量与站点需求相匹配，从而减少了车辆的往返次数，提高了运输效率。

  

### 9.2 问题 2 结果

在下课高峰时段，同样依据模型求解，得到了下课高峰时段的最优车辆调度方案以及对应的最优运输时间。具体调度安排如下：

| 车辆编号 | 行驶路线 | 车辆类型 |

|----------|----------|----------|

| 42 | 8 | 高峰车 1 |

| 43 | 7 | 高峰车 1 |

| 44 | 4 | 高峰车 1 |

| 45 | 8 | 高峰车 1 |

| 46 | 7 | 高峰车 2 |

| 47 | 4 | 高峰车 2 |

| 48 | 8 | 高峰车 2 |

| 49 | 7 | 高峰车 2 |

| 50 | 4 | 高峰车 2 |

| 51 | 8 | 高峰车 2 |

  

下课高峰时段将所有学生运输到相应站点的最优运输时间为 **21.78** 分钟。与早高峰的结果相比，下课高峰的运输时间增加了 **21.78 - 20.68 = 1.1** 分钟。这主要是由于下课高峰时段各站点的需求分布与早高峰不同。早高峰时学生集中从宿舍区前往教学区，而下课高峰时学生从教学区分散到各个宿舍区等，需求更加分散，导致车辆需要在更多的站点停靠，增加了上下车时间和行驶时间。

  

### 9.3 问题 3 结果

  
  

在可以自由调配车辆路线的情况下，运用遗传算法对早高峰和下课高峰的车辆路线分配进行全局搜索，得到了使两个高峰时段总运输时间最短的最优方案。以下是按照线路整理的车辆调度安排及运输时间：

  

#### 早高峰

| 行驶路线 | 车辆编号及类型（容量） |

| --- | --- |

| 1 | 车辆 40（支线，13） |

| 2 | 车辆 16（普通，26）、车辆 49（高峰车，26）、车辆 50（高峰车，26） |

| 3 | 车辆 4（普通，13）、车辆 9（普通，13）、车辆 38（普通，13）、车辆 41（支线，13） |

| 4 | 车辆 10（普通，13）、车辆 19（普通，13）、车辆 20（普通，13）、车辆 21（普通，13）、车辆 26（普通，26）、车辆 35（普通，26） |

| 5 | 车辆 2（普通，13）、车辆 7（普通，13）、车辆 8（普通，13）、车辆 13（普通，26）、车辆 36（普通，13）、车辆 39（普通，13）、车辆 44（高峰车，13）、车辆 45（高峰车，13）、车辆 51（高峰车，26） |

| 6 | 车辆 1（普通，13）、车辆 3（普通，13）、车辆 5（普通，13）、车辆 6（普通，13）、车辆 12（普通，26）、车辆 14（普通，26）、车辆 17（普通，26）、车辆 18（普通，26）、车辆 29（普通，26）、车辆 30（普通，26）、车辆 31（普通，26）、车辆 37（普通，13）、车辆 42（高峰车，13）、车辆 47（高峰车，26）、车辆 48（高峰车，26） |

| 7 | 车辆 11（普通，26）、车辆 15（普通，26）、车辆 28（普通，26）、车辆 34（普通，26）、车辆 46（高峰车，26） |

| 8 | 车辆 22（普通，13）、车辆 24（普通，13）、车辆 25（普通，26）、车辆 33（普通，26） |

| 9 | 车辆 23（普通，13）、车辆 27（普通，26）、车辆 32（普通，26）、车辆 43（高峰车，13） |

  

早高峰将所有学生运输到相应站点所需的最短时间为 $18.71$ 分钟。

  

#### 下课高峰

| 行驶路线 | 车辆编号及类型（容量） |

| --- | --- |

| 1 | 车辆 13（普通，26）、车辆 31（普通，26）、车辆 38（普通，13） |

| 2 | 车辆 7（普通，13）、车辆 11（普通，26）、车辆 47（高峰车，26） |

| 3 | 车辆 5（普通，13）、车辆 16（普通，26）、车辆 26（普通，26）、车辆 29（普通，26） |

| 4 | 车辆 8（普通，13）、车辆 9（普通，13）、车辆 19（普通，13）、车辆 30（普通，26）、车辆 32（普通，26）、车辆 35（普通，26）、车辆 37（普通，13）、车辆 42（高峰车，13）、车辆 48（高峰车，26）、车辆 51（高峰车，26） |

| 5 | 车辆 17（普通，26）、车辆 18（普通，26）、车辆 21（普通，13）、车辆 27（普通，26）、车辆 43（高峰车，13） |

| 6 | 车辆 2（普通，13）、车辆 14（普通，26）、车辆 28（普通，26） |

| 7 | 车辆 22（普通，13）、车辆 34（普通，26）、车辆 39（普通，13）、车辆 50（高峰车，26） |

| 8 | 车辆 1（普通，13）、车辆 3（普通，13）、车辆 20（普通，13）、车辆 23（普通，13）、车辆 24（普通，13）、车辆 40（支线，13）、车辆 41（支线，13）、车辆 45（高峰车，13）、车辆 46（高峰车，26）、车辆 49（高峰车，26） |

| 9 | 车辆 4（普通，13）、车辆 6（普通，13）、车辆 10（普通，13）、车辆 12（普通，26）、车辆 15（普通，26）、车辆 25（普通，26）、车辆 33（普通，26）、车辆 36（普通，13） |

  

下课高峰将所有学生运输到相应站点所需的最短时间为 $19.32$ 分钟。

  

早高峰和下课高峰两个时段的总运输时间为 $18.71 + 19.32 = 38.03$ 分钟。通过自由调配路线，能够充分发挥每辆车的运输能力，进一步优化运输效率，减少总运输时间。与前两问固定路线或简单调整路线的情况相比，自由调配路线可以根据不同时段的需求特点，更加灵活地安排车辆，避免了某些路线车辆资源的浪费，提高了整体的运输效益。例如，在早高峰时，6 号路线分配了较多车辆，可能是该路线在早高峰经过的站点需求较大；而在下课高峰时，8 号和 9 号路线车辆分配较多，这可能与下课高峰学生的流向有关。

  

### 9.4 问题 4 结果

  

#### 9.4.1 蒙特卡罗模拟结果概述

在问题 4 中，我们采用蒙特卡罗模拟方法考虑了天气因素对候车人数和运行速率的影响。通过随机生成大量不同的候车人数和运行速率组合，并对每种组合进行离散事件仿真，统计运输时间。以下是给定的不同场景下的仿真结果：

  

| 场景 | 需求变化 | 速度变化 | 运输时间(分钟) | 变化率 |

| ---- | ---- | ---- | ---- | ---- |

| 1 | 增加 15% | 增加 5% | 30.45 | - |

| 2 | 增加 15% | 减少 5% | 34.82 | - |

| 3 | 减少 15% | 增加 5% | 15.16 | - |

| 4 | 减少 15% | 减少 5% | 17.83 | - |

  

同时，问题 3 中早高峰和下课高峰两个时段的总运输时间为 38.03 分钟。

  

#### 9.4.2 各场景下运输时间分析

- **场景 1：需求增加 15%，速度增加 5%**

- 运输时间为 30.45 分钟。虽然候车人数增加了 15%，但校车运行速率增加了 5%，在一定程度上缓解了运输压力。运行速率的提升使得校车在站点间的行驶时间减少，从而部分抵消了因人数增加带来的上下车时间和运输趟数的增加。不过，整体运输时间仍比问题 3 的结果有所增加，这表明人数增加的影响相对更大一些。

- 变化率约为 -19.93%（负号表示相对问题 3 的结果减少），说明在这种场景下，运输效率有所降低，但由于速度的提升，降低幅度相对较小。

- **场景 2：需求增加 15%，速度减少 5%**

- 运输时间为 34.82 分钟。此时，候车人数的增加和运行速率的降低双重因素叠加，导致运输时间显著增加。人数增加使得每趟车的上下车时间增多，且需要更多的运输趟数；而速度降低又进一步延长了校车在站点间的行驶时间。

- 变化率约为 -8.44%，表明运输效率明显下降，这种场景对校车调度的挑战最大。

- **场景 3：需求减少 15%，速度增加 5%**

- 运输时间为 15.16 分钟。候车人数的减少使得每趟车的上下车时间减少，运输趟数也相应减少；而运行速率的增加又进一步缩短了行驶时间。两者共同作用，使得运输时间大幅减少。

  
  

## 10、结论与展望

### 10.1 结论

- 本文建立的校园交通网络模型和采用的离散事件仿真、遗传算法、蒙特卡罗模拟等方法，能够有效地解决西南大学校车调度优化问题。

- 自由调配车辆路线可以显著提高校车的运输效率，减少学生的等待时间。

- 天气因素对校车调度方案有一定的影响，需要在实际运营中考虑这些因素。

  

### 10.2 展望

- 可以进一步考虑交通拥堵、车辆故障等突发情况，提高模型的实用性。

- 可以结合实时数据，实现校车的动态调度，提高调度方案的实时性和准确性。

- 可以将模型扩展到其他校园或城市公交系统，为更多的交通优化问题提供解决方案。

  

## 11、参考文献

  

$^[1]$ [WSF89] D. Whitley, T. Starkweather, and D. Fuguay. Scheduling problems and traveling salesman.

$^[2]$ $Simulation\ and \ the \ Monte \ Carlo \ Method$ . Reuven Y.Rubinstein

  

## 12、附录

  

- 校园校车地图

![校园地图](map.jpg)

  
  

- 站点之间的距离

##### 一号线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 经管院 | 资环院 | 370 |

| 资环院 | 32教 | 383 |

| 32教 | 共青团花园 | 272 |

| 共青团花园 | 楠园 | 315 |

| 楠园 | 校史馆 | 239 |

| 校史馆 | 大礼堂 | 163 |

| 大礼堂 | 研究生院 | 123 |

| 研究生院 | 中心图书馆(地科院) | 222 |

| 中心图书馆(地科院) | 8教 | 310 |

| 8教 | 行署楼1号门 | 179 |

| 行署楼 | 田家炳 | 201 |

| 田家炳 | 文学院 | 111 |

| 文学院 | 圆顶 | 224 |

| 圆顶 | 外办 | 204 |

| 外办 | 5号门 | 230 |

  

##### 二号线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 经管院 | 资环院 | 370 |

| 资环院 | 32教 | 383 |

| 32教 | 共青团花园 | 272 |

| 共青团花园 | 楠园 | 315 |

| 楠园 | 校史馆 | 239 |

| 校史馆 | 大礼堂 | 163 |

| 大礼堂 | 研究生院 | 123 |

| 研究生院 | 中心图书馆(地科院) | 222 |

| 中心图书馆(地科院) | 8教 | 310 |

| 8教 | 行署楼1号门 | 179 |

| 行署楼 | 田家炳 | 201 |

| 田家炳 | 校医院 | 249 |

| 校医院 | 西师街 | 118 |

| 西师街 | 5号门 | 455 |

  

##### 三号线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 后山竹园 | 32教 | 466 |

| 32教 | 共青团花园 | 272 |

| 共青团花园 | 楠园 | 315 |

| 楠园 | 校史馆 | 239 |

| 校史馆 | 大礼堂 | 163 |

| 大礼堂 | 研究生院 | 123 |

| 研究生院 | 中心图书馆(地科院) | 222 |

| 中心图书馆(地科院) | 地科院 | 74 |

| 地科院 | 心理学部 | 260 |

| 心理学部 | 外国语学院 | 99 |

| 外国语学院 | 药学院 | 144 |

| 药学院 | 梅园 | 157 |

| 梅园 | 梅园食堂 | 155 |

| 梅园食堂 | 橘园 | 358 |

| 橘园 | 桃园 | 256 |

| 桃园 | 荟文楼 | 92 |

| 荟文楼 | 圆顶 | 309 |

| 圆顶 | 外办 | 147 |

| 外办 | 5号门 | 228 |

| 橘园 | 田家炳文学院 | 390 |

| 田家炳文学院 | 圆顶 | 320 |

| 2号门 | 共青团花园2号门 | 121 |

  

##### 四号线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 2号门 | 共青团花园2号门 | 121 |

| 共青团花园 | 楠园 | 315 |

| 楠园 | 校史馆 | 239 |

| 校史馆 | 大礼堂 | 163 |

| 大礼堂 | 研究生院 | 123 |

| 研究生院 | 中心图书馆(地科院) | 222 |

| 中心图书馆(地科院) | 地科院 | 74 |

| 地科院 | 心理学部 | 260 |

| 心理学部 | 外国语学院 | 99 |

| 外国语学院 | 药学院 | 144 |

| 药学院 | 梅园 | 157 |

| 梅园 | 梅园食堂 | 155 |

| 梅园食堂 | 橘园12舍 | 172 |

| 橘园12舍 | 橘园 | 186 |

  

##### 五号线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 2号门 | 共青团花园2号门 | 121 |

| 共青团花园 | 楠园 | 315 |

| 楠园 | 校史馆 | 239 |

| 校史馆 | 大礼堂 | 163 |

| 大礼堂 | 研究生院 | 123 |

| 研究生院 | 中心图书馆(地科院) | 222 |

| 中心图书馆(地科院) | 8教 | 310 |

| 8教 | 行署楼1号门 | 179 |

| 行署楼 | 田家炳 | 201 |

| 田家炳 | 圆顶 | 335 |

| 圆顶 | 外办 | 204 |

| 外办 | 5号门 | 230 |

  

##### 六号线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 2号门 | 共青团花园2号门 | 121 |

| 后山竹园 | 32教 | 466 |

| 32教 | 共青团花园 | 272 |

| 共青团花园 | 楠园 | 315 |

| 楠园 | 校史馆 | 239 |

| 校史馆 | 大礼堂 | 163 |

| 大礼堂 | 研究生院 | 123 |

| 研究生院 | 中心图书馆(地科院) | 222 |

| 中心图书馆(地科院) | 地科院 | 74 |

| 地科院 | 心理学部 | 260 |

| 心理学部 | 外国语学院 | 99 |

| 外国语学院 | 26教 | 214 |

| 26教 | 梅园1舍 | 133 |

| 梅园1舍 | 橘园12舍 | 213 |

| 橘园12舍 | 橘园10舍 | 86 |

| 橘园10舍 | 橘园 | 137 |

| 橘园 | 桃园 | 256 |

| 桃园 | 文学院 | 282 |

| 文学院 | 田家炳 | 108 |

| 田家炳 | 行署楼 | 201 |

| 行署楼 | 八教 | 179 |

| 八教 | 地科院 | 236 |

  

##### 七号线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 2号门 | 楠园 | 436 |

| 楠园 | 校史馆 | 239 |

| 校史馆 | 大礼堂 | 163 |

| 大礼堂 | 研究生院 | 123 |

| 研究生院 | 中心图书馆(地科院) | 222 |

| 中心图书馆(地科院) | 地科院 | 74 |

| 地科院 | 心理学部 | 260 |

| 心理学部 | 外国语学院 | 99 |

| 外国语学院 | 26教 | 214 |

| 26教 | 梅园1舍 | 133 |

| 梅园1舍 | 橘园12舍 | 213 |

| 橘园12舍 | 橘园10舍 | 86 |

| 橘园10舍 | 橘园 | 137 |

| 橘园 | 桃园 | 256 |

| 桃园 | 荟文楼 | 92 |

| 荟文楼 | 文学院 | 190 |

| 文学院 | 田家炳 | 108 |

| 田家炳 | 行署楼 | 201 |

| 行署楼 | 八教 | 179 |

| 八教 | 地科院 | 236 |

  

##### 八号线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 地科院 | 心理学部 | 260 |

| 心理学部 | 外国语学院 | 99 |

| 外国语学院 | 26教 | 214 |

| 26教 | 梅园1舍 | 133 |

| 梅园1舍 | 橘园12舍 | 213 |

| 橘园12舍 | 橘园10舍 | 86 |

| 橘园10舍 | 橘园 | 137 |

| 橘园 | 桃园 | 256 |

| 桃园 | 荟文楼 | 92 |

| 荟文楼 | 文学院 | 190 |

| 文学院 | 田家炳 | 108 |

| 田家炳 | 行署楼 | 201 |

| 行署楼 | 八教 | 179 |

| 八教 | 地科院 | 236 |

| 音乐学院 | 八教 | 181 |

  

##### 经管专线

| 起始站点 | 终点站点 | 距离（m） |

| --- | --- | --- |

| 经管院 | 资环院 | 370 |

| 资环院 | 32教 | 383 |

| 32教 | 共青团花园 | 272 |

| 共青团花园 | 楠园 | 315 |