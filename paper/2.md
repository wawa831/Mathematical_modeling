### 摘要

随着校车的需求的增长，校车调度问题对校园交通系统和师生出行体验的影响日益显著。合理的校车调度方案不仅能够提升车辆资源利用率，缩短学生候车与乘车时间，还能为智慧校园管理提供科学决策依据。本文以西南大学校车路线背景，针对早高峰和下课高峰时段的校车运输需求，建立了校园交通网络模型。模型以站点为节点、线路为边，综合考虑了车辆类型、容量、行驶速度、上下车时间等因素。

在第一问中，我们基于实际需求数据，采用离散事件仿真方法，模拟校车在固定线路下的循环运输过程，计算了所有学生被运送到目标站点所需的最短时间，并分析了各类车辆的调度安排。第二问进一步分析了下课高峰时段的需求变化，优化了车辆分配方案。第三问则允许高峰车型在不同线路间自由调配，并引入换线等待时间，通过遗传算法等智能优化方法，获得了全局最优的车辆调度方案。最后，本文对模型的参数敏感性进行了分析，并提出了模型的优缺点及改进建议。

本研究不仅为高校校车调度提供了量化分析工具，也为类似的城市公交、企业通勤等交通系统优化提供了理论参考和实践指导。


## 1、问题背景介绍与模型设计

本题要求在给定校车数量、容量、线路和早高峰各站点需求的情况下，设计调度方案，使所有学生在最短时间内被运送到目标站点。需考虑：

- 校车只能跑固定线路（普通车、支线车、高峰车分配见题目）
- 每人上/下车各需3秒
- 校车行驶速度为15km/h
- 高峰车可任意分配，但本问只需按默认分配

#### 1.1 建模假设

- 所有学生在 $7:30$ 与 $9：45$ 前已到达乘车点，且不会再增加。
- 每位学生的上车和下车时间均为3秒，且可并行进行（即同一时刻可有多人上下车）。
- 校车在各站点间行驶速度恒定为15km/h。
- 校车到达乘车点时，所有需上车的学生均可依次上车，未超载。
- 校车在每条线路上循环运行，直到所有需求被满足。
- 高峰车在本问按题目默认分配，不考虑换线等待。
- 不考虑交通拥堵、故障等突发情况。


#### 1.2 符号说明

| 符号              | 含义                                 |
|-------------------|--------------------------------------|
| $N$               | 校园内所有站点集合                   |
| $M$               | 校车线路数                           |
| $C^i_a$           | 第$i$条线路上容量为$a$的车辆数        |
| $S^i$             | 第$i$条线路经过的站点序列             |
| $P_j$             | 第$j$个站点                          |
| $dist(P_i,P_j)$   | $P_i$与$P_j$之间的距离（单位：km）    |
| $V$               | 校车行驶速度（15km/h）               |
| $T_{on}$          | 上车总时间                           |
| $T_{off}$         | 下车总时间                           |
| $t_i$             | 单人上/下车时间（3s）                |
| $T_{run}$         | 行驶时间                             |
| $T_{total}$       | 总运输时间                           |

#### 1.3 模型建立与算法实现

##### 1.3.1 运输时间计算

- **行驶时间**：

  $$
  T_{run} = \frac{dist(P_i, P_{i+1})}{V} \times 60 \quad (\text{单位：分钟})
  $$

- **上/下车时间**：

  $$
  T_{on} = n_{on} \times t_i / 60 \\
  T_{off} = n_{off} \times t_i / 60
  $$

  其中 $n_{on}$、$n_{off}$ 分别为本站上车、下车人数。

- **每辆车每一段总用时**：

  $$
  T_{seg} = T_{run} + T_{on} + T_{off}
  $$

- **总运输时间**：

  当最后一辆有乘客的车完成所有运输任务时的累计时间。

##### 1.3.2 校车调度规则

- 普通车只能跑固定编号线路，支线车只能跑支线，高峰车按题目默认分配。
- 每辆车循环运行，直到所有需求被满足。

##### 1.3.3 仿真流程

1. 初始化所有站点需求、车辆分配、车辆状态。
2. 每轮循环，所有车辆依次按线路行驶，依次处理每一站的上下车。
3. 累计每辆车每一段的行驶和上下车时间。
4. 当所有需求为0时，记录总用时，输出调度方案。

##### 4.算法实现

本题采用**离散事件仿真**，主要流程如下：

1. **数据初始化**：
   - 读取站点、线路、车辆、需求数据。
   - 构建校车网络图。

2. **车辆调度与仿真**：
   - 对每辆车，循环遍历其线路上的所有站点。
   - 在每一站，处理下车（目的地为该站的乘客）、上车（有需求且未超载）。
   - 计算本段行驶时间、上下车时间，累计到总用时。
   - 重复循环，直到所有需求为0。

3. **输出结果**：
   - 输出最优运输时间和每辆车的调度安排。

---